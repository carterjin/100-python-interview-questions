- [Python Basics](#python-basics)
  * [Python Language Basic](#python-language-basic)
    + [1. List 5 common python standard libraries:](#1-list-5-common-python-standard-libraries-)
    + [2. Python built-in data structures](#2-python-built-in-data-structures)
    + [3. Describe what with does for you when opening files](#3-describe-what-with-does-for-you-when-opening-files)
    + [4. Python immutable and mutable data types](#4-python-immutable-and-mutable-data-types)
    + [5. Get current time and date](#5-get-current-time-and-date)
    + [6. Differece between Python and other languages](#6-differece-between-python-and-other-languages)
    + [7. Difference between Python 3 and Python 2](#7-difference-between-python-3-and-python-2)
    + [8. The Zen of python](#8-the-zen-of-python)
    + [9. docstring](#9-docstring)
    + [10. type annotation](#10-type-annotation)
    + [11. Python naming convention](#11-python-naming-convention)
    + [12. List some Python code formatting tools](#12-list-some-python-code-formatting-tools)
    + [13. convert a string from GBK coding to UTF-8 coding](#13-convert-a-string-from-gbk-coding-to-utf-8-coding)
    + [14. use regular expression to split string and remove non alphanumericals](#14-use-regular-expression-to-split-string-and-remove-non-alphanumericals)
    + [15. "" and '' difference](#15----and----difference)
    + [16. Flatten [[1,2],[3,4],[5,6]] to be [1,2,3,4,5,6]](#16-flatten---1-2---3-4---5-6---to-be--1-2-3-4-5-6-)
    + [17. Invalid dictionary keys](#17-invalid-dictionary-keys)
    + [18. How to exchange the keys and values in {'A':1, 'B':2}](#18-how-to-exchange-the-keys-and-values-in---a--1---b--2-)
    + [19. slice a generator object](#19-slice-a-generator-object)
    + [20. difference between list tuple copy and deepcopy](#20-difference-between-list-tuple-copy-and-deepcopy)
    + [21. Meaning and usage of \*args, \*\*kwargs](#21-meaning-and-usage-of---args------kwargs)
    + [22. function or variable names with '_' prefix and suffix](#22-function-or-variable-names-with-----prefix-and-suffix)
    + [23. What types in Python can be encoded in json](#23-what-types-in-python-can-be-encoded-in-json)
    + [24. Chinese characters are converted to unicode in json, how to keep them](#24-chinese-characters-are-converted-to-unicode-in-json--how-to-keep-them)
    + [25. output a date two days in the future](#25-output-a-date-two-days-in-the-future)
    + [26. encoding and decoding json](#26-encoding-and-decoding-json)
    + [27. Whats the use of function decorator](#27-whats-the-use-of-function-decorator)
    + [28. call](#28-call)
    + [29. How to tell if an object is a function or a method?](#29-how-to-tell-if-an-object-is-a-function-or-a-method-)
    + [30. Interface in Python](#30-interface-in-python)
    + [31. Reflection in Python](#31-reflection-in-python)
    + [32. Metaclass or type](#32-metaclass-or-type)
    + [33. Maximum recursion depth in python is 1000, how to increase?](#33-maximum-recursion-depth-in-python-is-1000--how-to-increase-)
    + [34. List 5 Python Error type and meaning](#34-list-5-python-error-type-and-meaning)
    + [35. w, a+, wb file open mode](#35-w--a---wb-file-open-mode)
    + [36. sort and sorted difference](#36-sort-and-sorted-difference)
    + [37. requests.content requests.text difference](#37-requestscontent-requeststext-difference)
    + [38. Python old style classes and new style classes difference](#38-python-old-style-classes-and-new-style-classes-difference)
    + [39. string operation: given a sentence, print all the missing letters](#39-string-operation--given-a-sentence--print-all-the-missing-letters)
    + [40. repeated entry with question 4](#40-repeated-entry-with-question-4)
    + [41. Any difference between is and ==?](#41-any-difference-between-is-and----)
    + [42. Please get all odd numbers from a list and form a new list](#42-please-get-all-odd-numbers-from-a-list-and-form-a-new-list)
    + [43. use one line of python code for 1+2+3+10248](#43-use-one-line-of-python-code-for-1-2-3-10248)
    + [44. Python Scope and the LEGB Rule](#44-python-scope-and-the-legb-rule)
    + [45. Convert '123' to 123, not using built-in api such as int()](#45-convert--123--to-123--not-using-built-in-api-such-as-int--)
    + [46. Given an array of integers, find two of them that sums to the given target value](#46-given-an-array-of-integers--find-two-of-them-that-sums-to-the-given-target-value)
    + [47. Code for reading very large jsonline file](#47-code-for-reading-very-large-jsonline-file)
    + [48. Print all the file address in a directory](#48-print-all-the-file-address-in-a-directory)
    + [49. get .pyc file in the directory and sub directories](#49-get-pyc-file-in-the-directory-and-sub-directories)
    + [50. input date and output the number of day of the year**](#50-input-date-and-output-the-number-of-day-of-the-year--)
    + [51. shuffle a sorted list](#51-shuffle-a-sorted-list)
    + [52. sort a dict by value](#52-sort-a-dict-by-value)
    + [53. Dict comprehension](#53-dict-comprehension)
    + [54. reverse a string](#54-reverse-a-string)
    + [55. given alist, sort by age](#55-given-alist--sort-by-age)
    + [56. What is the result of the following code](#56-what-is-the-result-of-the-following-code)
    + [57. generate an arithmetic progression with a common difference of 11](#57-generate-an-arithmetic-progression-with-a-common-difference-of-11)
    + [58. given two lists, find common elements and different elements](#58-given-two-lists--find-common-elements-and-different-elements)
    + [59. find the ten most frequent words in a paragraph](#59-find-the-ten-most-frequent-words-in-a-paragraph)
    + [60. given a number string, perform the following](#60-given-a-number-string--perform-the-following)
    + [61. given a number list, find the second largest number](#61-given-a-number-list--find-the-second-largest-number)
    + [62. What is the result of this code](#62-what-is-the-result-of-this-code)
    + [63. Count character number of appearance in a string](#63-count-character-number-of-appearance-in-a-string)
    + [64. When to use the super function?](#64-when-to-use-the-super-function-)
- [Python Advanced](#python-advanced)
  * [Class](#class)
    + [65. Python instance method vs static method vs class method.](#65-python-instance-method-vs-static-method-vs-class-method)
    + [66. traverse all the tributes of an object and print them.](#66-traverse-all-the-tributes-of-an-object-and-print-them)
    + [67. Write a class so it supports as much operator as possible.](#67-write-a-class-so-it-supports-as-much-operator-as-possible)
    + [68. Talk about Cython, CPython, IPython, Pypy, Numba and their advantages and disadvantages.](#68-talk-about-cython--cpython--ipython--pypy--numba-and-their-advantages-and-disadvantages)
    + [69. Python Interface](#69-python-interface)
    + [70. Get and set attributes of objects](#70-get-and-set-attributes-of-objects)
  * [Memory management](#memory-management)
    + [71. What operations would cause Python to leak memory, and how to deal with that?](#71-what-operations-would-cause-python-to-leak-memory--and-how-to-deal-with-that-)
    + [72. Difference between out of memory and memory leak](#72-difference-between-out-of-memory-and-memory-leak)
    + [73. Python memory management and garbage collection](#73-python-memory-management-and-garbage-collection)
  * [Function](#function)
    + [74. What is Hash?](#74-what-is-hash-)
    + [75. 4 rules for writing functions](#75-4-rules-for-writing-functions)
    + [76. Is Python call-by-value or call-by-reference?](#76-is-python-call-by-value-or-call-by-reference-)
    + [77. How to set up a global variable inside a function?](#77-how-to-set-up-a-global-variable-inside-a-function-)
    + [78. Decorator with arguments?](#78-decorator-with-arguments-)
    + [79. When and how to stop recursion?](#79-when-and-how-to-stop-recursion-)
  * [Design Pattern](#design-pattern)
    + [80. Talk about your understanding of design pattern.](#80-talk-about-your-understanding-of-design-pattern)
    + [81. How does python realize singleton design?](#81-how-does-python-realize-singleton-design-)
    + [82. The application of singleton](#82-the-application-of-singleton)
    + [83. What's your understanding on decorators and show a timer decorator](#83-what-s-your-understanding-on-decorators-and-show-a-timer-decorator)
    + [84. What is closure?](#84-what-is-closure-)
    + [85. Applications of decorators](#85-applications-of-decorators)
    + [86. Difference of generator and iterator](#86-difference-of-generator-and-iterator)
    + [87. What is the type of x?](#87-what-is-the-type-of-x-)
    + [88. Use one line of code to group 1-N integers into groups of 3. Example:[1,2,3,4,5,6] ->[[1,2,3],[4,5,6]]](#88-use-one-line-of-code-to-group-1-n-integers-into-groups-of-3-example--1-2-3-4-5-6------1-2-3---4-5-6--)
    + [89. yield statement](#89-yield-statement)
  * [Object Oriented](#object-oriented)
    + [90. Dunder or magic methods in Python](#90-dunder-or-magic-methods-in-python)
    + [91. Talk about your understanding of object oriented programming](#91-talk-about-your-understanding-of-object-oriented-programming)
  * [Regular Expression](#regular-expression)
    + [92. use a regular expression to match IP](#92-use-a-regular-expression-to-match-ip)
    + [93. a = 'abbbccc', use re to change to 'abccc', no matter how many b.](#93-a----abbbccc---use-re-to-change-to--abccc---no-matter-how-many-b)
    + [94. Python string search and replace](#94-python-string-search-and-replace)
    + [95. What is the difference between <.> and <.*?> when matching HTML g tag?](#95-what-is-the-difference-between----and------when-matching-html-g-tag-)
    + [96. Regular expression greedy vs lazy quantifiers](#96-regular-expression-greedy-vs-lazy-quantifiers)
  * [System Programming](#system-programming)
    + [97. Process control](#97-process-control)
    + [98. Your opinion on multiprocessing, multithreading, coroutine](#98-your-opinion-on-multiprocessing--multithreading--coroutine)
    + [99. What about async IO?](#99-what-about-async-io-)
    + [100. Difference between parallelism and concurrency](#100-difference-between-parallelism-and-concurrency)

These questions are originally from https://github.com/DasyDong/interview/blob/master/notes/python_interview.md. The original questiona dn answers are in Chinese. For all the questions, I either translated the answer, or found an answer somewhere online, or figured out the answer myself. I have tested all the codes to be correct and running on Spyder 4.1.2 with Python 3.7.

# Python Basics
## Python Language Basic

### 1. List 5 common python standard libraries:

os, logging, system, time, re, math, threading

itertools, functools, Queue, pickle, glob

### 2. Python built-in data structures

list, tuple, dictionary, set.

### 3. Describe what with does for you when opening files

When the “with” statement is executed, Python evaluates the expression, calls the __enter__ method on the resulting value (which is called a “context guard”), and assigns whatever __enter__ returns to the variable given by as. Python will then execute the code body, and no matter what happens in that code, call the guard object’s __exit__ method.

### 4. Python immutable and mutable data types

- Immutable: int, float, bool, string, unicode, tuple

Immutables when given a new value a new address in memory is given.

- mutable objects: list, dict, set

mutables are the address of the objects, and when changing values, the address don't change.

### 5. Get current time and date
```
from datetime import datetime
datetime.now()
```
### 6. Differece between Python and other languages
- Python is a typical strongly typed language and doesn't need implicit type conversion

strong: Python, Java. weak: PHP, C

- Python is a dynamic type language

dynamic: Python, Javascript static: Java, C

- Python is an interpreted language

compiled: C, C++. interpreted: PHP, Ruby, Python, Javascript

### 7. Difference between Python 3 and Python 2
- division operator: 3: 7/5 = 1.4 2: 7/5 = 1
- print: 3: print('hello') 2: print 'hello'
- Unicode: 3: Implicit str is Unicode Bytes and str are different, 2: implicit str is ASCII, Bytes and str are the same
- xrange: no longer supported in 3
- except: 3: except NameError as err, 2: except NameError, err

### 8. The Zen of python

`import this`

Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!


### 9. docstring
```
def function(a, b):
    """Do X and return a list."""
```
Can be called by `function.__doc__`

### 10. type annotation
def list_to_str (param_list:list,connect_str: str = " ") - > str:
An annotation to help understand parameter types, have no real effect on code.

### 11. Python naming convention
```
_ protected
__ private
__init__ reserved constructor method
```

### 12. List some Python code formatting tools
pylint, yapf, autopep8, flake8

### 13. convert a string from GBK coding to UTF-8 coding
```
demo_str = "demo".encode("gbk")
demo=demo_str.decode('gbk').encode('utf-8'）
```
### 14. use regular expression to split string and remove non alphanumericals
```
import re
s = 'a: b 3 c'
re.compile(r'\W').split(s)
output:
['a','b','3','c']
```

### 15. "" and '' difference

No difference except:
`"a'b'c"`

### 16. Flatten [[1,2],[3,4],[5,6]] to be [1,2,3,4,5,6]
```
question_list =  [[1,2],[3,4],[5,6]]
[a for inside in question_list for a in inside]
```
or convert to np array and use `question_list.flatten`

### 17. Invalid dictionary keys

Valid dictionary keys are immutables, list and dict are not valid

whether an object can be key depends on whether it has `__hash__` method.

### 18. How to exchange the keys and values in {'A':1, 'B':2}
```
result_dic = {v:k for k,v in demo_dic.items()}
```
### 19. slice a generator object
```
import itertools
itertools.islice(gener, 10, 20)
```
### 20. difference between list tuple copy and deepcopy
tuple
```
a = (1, 2, 3, [4, 5, 6, 7], 8)
a[3] = 3  //typeerror
a[3][3] = 9 // a (1, 2, 3, [4, 5, 6, 9], 8)
```
You only changed the value of the list but not its id

list
```
a = [1,2,[3,4]]
b = a
c = a[:]
d = a.copy()
e = copy.deepcopy(a)

id(a), id(b), id(c), id(d), id(e)  // Only a and b are the same id
 >>> (4398429512, 4398429512, 4398398664, 4398429576, 4398429192)

a.append(5) // Only b changed with a
a, b, c,d,e
([1, 2, [3, 4], 5], [1, 2, [3, 4], 5], [1, 2, [3, 4]], [1, 2, [3, 4]], [1, 2, [3, 4]])

a[2][1] = 7 // Except for deepcopy e, all others changed with a
a, b, c,d,e
([1, 2, [3, 7], 5], [1, 2, [3, 7], 5], [1, 2, [3, 7]], [1, 2, [3, 7]], [1, 2, [3, 4]])
```
copy only applied to the objects, deepcopy also apply to the subobjects.

### 21. Meaning and usage of \*args, \*\*kwargs

args is short for arguments, used to pass a non-keyworded variable length argument list.

kwargs is short for keyword arguments, used to pass a keyworded, variable length argument list.

### 22. function or variable names with '_' prefix and suffix

- single suffix: avoid conflicting python default keywords.
- single prefix: internal variable or function for a class.
- double prefix: mangling, rewrite name in order to avoid conflict in subclass

### 23. What types in Python can be encoded in json
list, dict, str, int/float, boolean, None

### 24. Chinese characters are converted to unicode in json, how to keep them
```
json.dumps(dict_demo, ensure_ascii = False)
```

### 25. output a date two days in the future
```
from datetime import datetime, timedelta
now_date = datetime.now().date()
offset = timedelta(days = 2)
(now_date + offset).strftime('%Y%m%d')
```

### 26. encoding and decoding json
```
import json
#json to dict
json.loads(json_str)

#dict to json
json.dumps(dict)
```
### 27. Whats the use of function decorator

- Memoize
- Timer
- Pre-steps and post steps for function

### 28. call

A built-in method that enables programmers to use classes similarly to functions.

### 29. How to tell if an object is a function or a method?

- def outside class is function.
- def inside function, if called from class is function, if called from object is method.
```
from types import MethodType, FunctionType
isinstance(f,MethodType/FunctionType)
```

### 30. Interface in Python

At a high level, an interface acts as a blueprint for designing classes. Like classes, interfaces define methods. Unlike classes, these methods are abstract. An abstract method is one that the interface simply defines. It doesn’t implement the methods. This is done by classes, which then implement the interface and give concrete meaning to the interface’s abstract methods.

### 31. Reflection in Python

The ability to examine the attibutes about objects that might be passed as parameters to a function.
Such functions are `type()`, `isinstance()`, `callable()`, `dir()`, `getattr()`.

### 32. Metaclass or type

https://blog.ionelmc.ro/2015/02/09/understanding-python-metaclasses/

### 33. Maximum recursion depth in python is 1000, how to increase?
```
import sys
sys.setrecursionlimit(1500)
```
### 34. List 5 Python Error type and meaning
```
BaseException
 +-- SystemExit
 +-- KeyboardInterrupt
 +-- GeneratorExit
 +-- Exception
      +-- StopIteration
      +-- StopAsyncIteration
      +-- ArithmeticError
      |    +-- FloatingPointError
      |    +-- OverflowError
      |    +-- ZeroDivisionError
      +-- AssertionError
      +-- AttributeError
      +-- BufferError
      +-- EOFError
      +-- ImportError
      |    +-- ModuleNotFoundError
      +-- LookupError
      |    +-- IndexError
      |    +-- KeyError
      +-- MemoryError
      +-- NameError
      |    +-- UnboundLocalError
      +-- OSError
      |    +-- BlockingIOError
      |    +-- ChildProcessError
      |    +-- ConnectionError
      |    |    +-- BrokenPipeError
      |    |    +-- ConnectionAbortedError
      |    |    +-- ConnectionRefusedError
      |    |    +-- ConnectionResetError
      |    +-- FileExistsError
      |    +-- FileNotFoundError
      |    +-- InterruptedError
      |    +-- IsADirectoryError
      |    +-- NotADirectoryError
      |    +-- PermissionError
      |    +-- ProcessLookupError
      |    +-- TimeoutError
      +-- ReferenceError
      +-- RuntimeError
      |    +-- NotImplementedError
      |    +-- RecursionError
      +-- SyntaxError
      |    +-- IndentationError
      |         +-- TabError
      +-- SystemError
      +-- TypeError
      +-- ValueError
      |    +-- UnicodeError
      |         +-- UnicodeDecodeError
      |         +-- UnicodeEncodeError
      |         +-- UnicodeTranslateError
      +-- Warning
           +-- DeprecationWarning
           +-- PendingDeprecationWarning
           +-- RuntimeWarning
           +-- SyntaxWarning
           +-- UserWarning
           +-- FutureWarning
           +-- ImportWarning
           +-- UnicodeWarning
           +-- BytesWarning
           +-- ResourceWarning
```
### 35. w, a+, wb file open mode

- r: read, if file doesn't exist, error
- w: write, if file doesn't exist, create file and write
- a: append, if file exists append at end, if not create file and write
- rb,wb: similar to r,w, but with binary
- r+: read and write, if file doesn't exist, error
- w+: read and write, if file doesn't exist, create file and write
- a+: read and write, if file exists append at end, if not create file and write

### 36. sort and sorted difference

- sort() changes a list in place, sort() doesn't work on tuples and dicts.
- sorted() creates a new sorted object, if used on dict type it sort keys by default.

### 37. requests.content requests.text difference

.content is the content of the response in bytes, .text is the content of the response in Unicode.

### 38. Python old style classes and new style classes difference

In Python 2.x there are two styles of classes depending on the presence or absence of a built-in type as a base-class.

Python 3.x supports only new style classes implicitly.

https://www.tutorialspoint.com/What-is-the-difference-between-old-style-and-new-style-classes-in-Python

### 39. string operation: given a sentence, print all the missing letters

```
def get_missing_letter(s):
    set_all = set([chr(x) for x in range(ord('a'), ord('z')+1)])
    set_s = set(s.lower())
    return ''.join(sorted(set_all - set_s))
```

### 40. repeated entry with question 4

### 41. Any difference between is and ==?
```
a = 1024, b = 1024
a is b
> False
a == b
> True
```
- is: compares the id of two variables
- ==: compares the value of two variables
- Note that Python caches smaller integer numbers so doing so with say a = 1, is statement still gives true and the IDs are the same.

### 42. Please get all odd numbers from a list and form a new list
```
a = [1,2,3,4,5,6,7,8,9]
res = [i for i in a if i%2==1]
```
### 43. use one line of python code for 1+2+3+10248

Now I am not sure if it means 1+2+3+10248 or 1+2+3+...+10248,
if former, except for the trivial `a = 1+2+3+10248` there is also

`sum([1,2,3,10248])`

for the later

`sum(range(1,10249))`

### 44. Python Scope and the LEGB Rule

The concept of scope rules how variables and names are looked up in your code. It determines the visibility of a variable within the code. The scope of a name or variable depends on the place in your code where you create that variable. The Python scope concept is generally presented using a rule known as the LEGB rule.

- Local scope: a function or lambda expression.
- Enclosing scope: a special scope that only exists for nested functions.
- Global scope: the top-most scope in Python, names in this scope are visible everywhere.
- Built-in scope: a special scope that's created or loaded whenever you run a script

### 45. Convert '123' to 123, not using built-in api such as int()

Among many ways to do it:
```
def str_to_int(s):
    num = 0
    for ch in s:
        num = num * 10 + ord(ch) - ord('0')
    return num
```

### 46. Given an array of integers, find two of them that sums to the given target value

Presume that each input correspond to only one answer and the numbers can't be reused.
Example: nums = [2,7,11,15], target = 9, nums[0]+nums[1]=9, return [0,1]

```
def two_sum(nums, target):
    for num in nums:
        if target - num in nums and num != target - num:
            return [nums.index(num), nums.index(target - num)]
```

### 47. Code for reading very large jsonline file

Given the following code:
```
def get_lines():
    with open('file.txt','rb') as f:
        return f.readlines()

if __name__ == '__main__':
    for e in get_lines():
        process(e)
```

Now we need to read a 10G file, but the memory is only 4G, keeping the rest of the code the same, only changing get_lines, how to realize that, what questions need to be considered?

```
def get_lines():
    with open('file.txt','rb') as f:
        return f.readlines()

if __name__ == '__main__':
    for e in get_lines():
        process(e)
```

The method by Pandaaaa906:
```
from mmap import mmap

def get_lines(fp):
    with open(fp,"r+") as f:
        m = mmap(f.fileno(), 0)
        tmp = 0
        for i, char in enumerate(m):
            if char==b"\n":
                yield m[tmp:i+1].decode()
                tmp = i+1

if __name__=="__main__":
    for i in get_lines("fp_some_huge_file"):
        print(i)
```

https://stackoverflow.com/questions/30294146/fastest-way-to-process-a-large-file

### 48. Print all the file address in a directory

```
import os
def print_directory_contents(s_path):

    for s_child in os.listdir(s_path):
        s_child_path = os.path.join(s_path, s_child)
        if os.path.isdir(s_child_path):
            print_directory_contents(s_child_path)
        else:
            print(s_child_path)
```

### 49. get .pyc file in the directory and sub directories

```
import os

def get_files(dir,suffix):
    res = []
    for root,dirs,files in os.walk(dir):
        for filename in files:
            name,suf = os.path.splitext(filename)
            if suf == suffix:
                res.append(os.path.join(root,filename))

    print(res)

get_files("./",'.pyc')
```

or my solution is:

```
import os
def scan_path(root):
    file_list = os.listdir(root)
    for obj in file_list:
        obj_path = os.path.join(root,obj)
        if os.path.isdir(obj_path):
            scan_path(obj_path)
        elif obj.endswith('.pyc'): 
            print(obj)
```

Using glob:

```
from glob import iglob

def scan_path(root, postfix):
    for file in iglob(f"{fp}/**/*{postfix}", recursive=True):
        print(file)

func(r'C:/Users/Kami/Google Drive/Data Science/coding', 'pyc')
```

### 50. input date and output the number of day of the year**
```
import datetime

def dayofyear():
    year = input("Year: ")
    month = input("Month: ")
    day = input("Day: ")
    date1 = datetime.date(year=int(year),month=int(month),day=int(day))
    date2 = datetime.date(year=int(year),month=1,day=1)
    return (date1-date2).days+1
```
### 51. shuffle a sorted list
```
import random

alist = [1,2,3,4,5]
random.shuffle(alist)
print(alist)
```

### 52. sort a dict by value

```
sorted(d.items(), key = lambda x:x[1])
```

### 53. Dict comprehension

```
# change 'k0:0|k1:1|...', to {k0:0, k1:1, ...}
d = {k:int(v) for t in str1.split("|") for k, v in (t.split(":"), )}
```

### 54. reverse a string
```
print(str1[::-1])
```
### 55. given alist, sort by age

```
alist = [{'name':'a','age':20},{'name':'b','age':30},{'name':'c','age':25}]

def sort_by_age(list1):
    return sorted(alist, key=lambda x:x['age'], reverse=True)
```

### 56. What is the result of the following code

```
list = ['a','b','c','d','e']
print(list[10:])
```
[], A bad index in Python, e.g. s[100] for the string "Hello", is a runtime error. However, slices work differently. If an index number in a slice is out of bounds, it is ignored and the slice uses the start or end of the string.

### 57. generate an arithmetic progression with a common difference of 11
My solution:
```
[*range(1,111,11)]
```
Another solution:
```
[x*11 for x in range(10)]
```

### 58. given two lists, find common elements and different elements
```
list1 = [1,2,3]
list2 = [3,4,5]
set1 = set(list1)
set2 = set(list2)

print(set1 & set2)
print(set1 ^ set2)
```

### 59. find the ten most frequent words in a paragraph
```
import re

def test(filepath):

    dictone = {}
    numTen = []

    with open(filepath,"r",encoding="utf-8") as f:
        for line in f:
            # remove punctuation
            line = re.sub(r'[^\w\s]','',line)
            # split paragraph into words
            lineone = line.split()
            for keyone in lineone:
                if not dictone.get(keyone):
                    dictone[keyone]=1
                else:
                    dictone[keyone]+=1
    numTen = sorted(dictone.items(),key=lambda x:x[1],reverse=True)[:10]
    numTen =[x[0]for x in numTen]
    return numTen
```

### 60. given a number string, perform the following

Rearrange so that all the odd numbers are in front of the even numbers, and the odd numbers are sorted in an increasing order, the even numbers in decreasing order. Example '1982376455' to '1355798642'.


```
def func1(l):
    if isinstance(l,str):
        l = list(l)
        l = [int(i) for i in l]
    l.sort(reverse=True)
    for i in range(len(l)):
        if l[i] % 2>0:
            l.insert(0,l.pop(i))
    print(''.join(str(e) for e in l))
```

### 61. given a number list, find the second largest number

```
def find_Second_large_num(num_list):
    tmp_list = sorted(num_list)
    print ("Second_large_num is :",tmp_list[-2])
```

### 62. What is the result of this code

```
def multi():
    return [lambda x : i*x for i in range(4)]
print([m(3) for m in multi()])
```

You may think the result is [0,3,6,9] but result is [9,9,9,9]. `lambda x: x*i` is a nested function, the naming space has only {'x':3}, when running the function, it asks the outer function for i, which is 3 after finishing the for loop.
To get the intended result you need:
```
fun = [lambda x, i=i: x*i for i in range(4)]
for m in fun:
    print(m(3))
```

### 63. Count character number of appearance in a string

```
def count_str(str_data):
    dict_str = {}
    for i in str_data:
        dict_str[i] = dict_str.get(i,0)+1
    return dict_str

dict_str = count_str("AAABBCCAC")
str_count_data = ""
for k,v in dict_str.items():
    str_count_data += k +str(v)
print(str_count_data)
```

### 64. When to use the super function?
You want to invoke a method in a parent class in place of a method that has been overridden in a subclass.
Read python3 cookbook chapter 8.7

https://books.google.com/books?id=f7wGeA71_eUC&pg=PA256&lpg=PA256&dq=python3+cookbook+8.7.+Calling+a+Method+on+a+Parent+Class

# Python Advanced

## Class

### 65. Python instance method vs static method vs class method.

- Instance method must be called by a class instance.
- Class method can be called by either a class instance or the class itself.
- Static method is quite special in Python, it can be called by either a class instance or the class itself.
- The difference between a static method and a class method, is the class method can access the class's variables but the static method can't.

See the example:https://medium.com/@arkilis/python-instance-method-vs-static-method-vs-class-method-5e43cef6df78

### 66. traverse all the tributes of an object and print them.
```
print(dir(object))
```
### 67. Write a class so it supports as much operator as possible.

I did not understand the given answer for this one:

```
class Array:
    __list = []

    def __init__(self):
        print "constructor"

    def __del__(self):
        print "destruct"

    def __str__(self):
        return "this self-defined array class"

    def __getitem__(self,key):
        return self.__list[key]

    def __len__(self):
        return len(self.__list)

    def Add(self,value):
        self.__list.append(value)

    def Remove(self,index):
        del self.__list[index]

    def DisplayItems(self):
        print "show all items---"
        for item in self.__list:
            print item
```

### 68. Talk about Cython, CPython, IPython, Pypy, Numba and their advantages and disadvantages.

Cython is a programming language that aims to be a superset of the Python programming language, designed to give C-like performance with code that is written mostly in Python with optional additional C-inspired syntax.

PyPy is an alternative implementation of the Python programming language to CPython (which is the standard implementation). PyPy often runs faster than CPython because PyPy is a just-in-time compiler while CPython is an interpreter.

CPython is Guido van Rossum’s reference version of the Python computing language. It’s most often called simply “Python”; speakers say “CPython” generally to distinguish it explicitly from other implementations.

IPython (Interactive Python) is a command shell for interactive computing in multiple programming languages, originally developed for the Python programming language, that offers introspection, rich media, shell syntax, tab completion, and history.

Numba is an open-source JIT compiler that translates a subset of Python and NumPy into fast machine code using LLVM, via the llvmlite Python package. It offers a range of options for parallelising Python code for CPUs and GPUs, often with only minor code changes.

### 69. Python Interface

Same as 30

### 70. Get and set attributes of objects

hasattr(), getattr(), setattr()

## Memory management

### 71. What operations would cause Python to leak memory, and how to deal with that?

It’s not so easy for a Python application to leak memory. Usually there are three scenarios:

1. some low level C library is leaking
2. your Python code have global lists or dicts that grow over time, and you forgot to remove the objects after use
3. there are some reference cycles in your app

Use objgraph.show_most_common_types and objgraph.by_type('type') to see what variables are leaking memory.

http://tech.labs.oliverwyman.com/blog/2008/11/14/tracing-python-memory-leaks/

### 72. Difference between out of memory and memory leak

Out of memory: system don't have enough memory to allocate to you, ie, you require 100M, system only have 90M.

Memory leak: memory is no longer needed is not released.

### 73. Python memory management and garbage collection

gc module: https://docs.python.org/3.7/library/gc.html

## Function

### 74. What is Hash?

Hash method in Python is a module that is used to return the hash value of an object. In programming, the hash method is used to return integer values that are used to compare dictionary keys using a dictionary look up feature. When used, it calls for the `__hash__()`  of an object which is set by default during the creation of the object by the user.

### 75. 4 rules for writing functions

I think it's quite arbitrary and didn't find any concensus on "the four rules" so below is a general thing:
https://devblogs.microsoft.com/oldnewthing/20060320-13/?p=31853

### 76. Is Python call-by-value or call-by-reference?

Neither, Python utilizes a system, which is known as “Call by Object Reference” or “Call by assignment”. In the event that you pass arguments like whole numbers, strings or tuples to a function, the passing is like call-by-value because you can not change the value of the immutable objects being passed to the function. Whereas passing mutable objects can be considered as call by reference because when their values are changed inside the function, then it will also be reflected outside the function.

### 77. How to set up a global variable inside a function?

`global x`

### 78. Decorator with arguments?

```
from functools import wraps

def decorator(*dargs, **dkwargs):

    def params_wrapper(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            func(*args, **kwargs)
        return wrapper
    return params_wrapper
```
Class decorator
```
class decorator(object):
    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        print('before............')
        res = self.func(*args, **kwargs)
        print('after............')
        return res
```

### 79. When and how to stop recursion?
Inside the function, make a decision before calling recursion, to either stop recursion or call recursion.

## Design Pattern

### 80. Talk about your understanding of design pattern.

This is kinda broad, maybe do some reading:
https://python-patterns.guide/

### 81. How does python realize singleton design?

Singleton Method is a type of Creational Design pattern to provide one and only one object of a particular type.

Method 1: Monostate/Borg Singleton Design pattern

```
class Borg:
    _shared_state = {}
    def _ _init_ _(self):
        self._ _dict_ _ = self._shared_state
class Example(Borg):
    def _ _init_ _(self, name=None):
        Borg._ _init_ _(self)
        if name is not None: self.name = name
    def _ _str_ _(self): return 'Example(%s)' % self.name
```

Another type of realization using inner class:
```
class OnlyOne:
    class __OnlyOne:
        def __init__(self, arg):
            self.val = arg
        def __str__(self):
            return repr(self) + self.val
    instance = None
    def __init__(self, arg):
        if not OnlyOne.instance:
            OnlyOne.instance = OnlyOne.__OnlyOne(arg)
        else:
            OnlyOne.instance.val = arg
    def __getattr__(self, name):
        return getattr(self.instance, name)
```

Method2: Only one object can be created for this class:
```
class Singleton:
   __instance = None
   @staticmethod 
   def getInstance():
      """ Static access method. """
      if Singleton.__instance == None:
         Singleton()
      return Singleton.__instance
   def __init__(self):
      """ Virtually private constructor. """
      if Singleton.__instance != None:
         raise Exception("This class is a singleton!")
      else:
         Singleton.__instance = self
```

### 82. The application of singleton

1. **Hardware interface access**: The use of singleton depends on the requirements. Singleton classes are also used to prevent concurrent access of class. Practically singleton can be used in case external hardware resource usage limitation required e.g. Hardware printers where the print spooler can be made a singleton to avoid multiple concurrent accesses and creating deadlock.
2. **Logger** : Singleton classes are used in log file generations. Log files are created by the logger class object. Suppose an application where the logging utility has to produce one log file based on the messages received from the users. If there is multiple client application using this logging utility class they might create multiple instances of this class and it can potentially cause issues during concurrent access to the same logger file. We can use the logger utility class as a singleton and provide a global point of reference so that each user can use this utility and no 2 users access it at the same time.
3. **Configuration File**: This is another potential candidate for Singleton pattern because this has a performance benefit as it prevents multiple users to repeatedly access and read the configuration file or properties file. It creates a single instance of the configuration file which can be accessed by multiple calls concurrently as it will provide static config data loaded into in-memory objects. The application only reads from the configuration file for the first time and thereafter from second call onwards the client applications read the data from in-memory objects.
4. **Cache**: We can use the cache as a singleton object as it can have a global point of reference and for all future calls to the cache object the client application will use the in-memory object.

### 83. What's your understanding on decorators and show a timer decorator

Decorators are callable objects that allows other functions to expand functions without changing codes. The return value of a decorator is a function.
```
import time
from functools import wraps

def timeit(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.clock()
        ret = func(*args, **kwargs)
        end = time.clock()
        print('used:',end-start)
        return ret

    return wrapper
@timeit
def foo():
    print('in foo()'foo())
```

### 84. What is closure?

A closure is a nested function which has access to a free variable from an enclosing function that has finished its execution. Three characteristics of a Python closure are:

1. it is a nested funcion
2. it has access to a free variable in outer scope
3. it is returned from the enclosing function

Example:
```
def startAt(x):
    def incrementBy(y):
        return x+y
    return incrementBy
a = startAt(1)
print(a)
print(a(1))
```

### 85. Applications of decorators

1. logging,
2. enforcing access control and authentication,
3. instrumentation and timing functions,
4. rate-limiting,
5. caching; and more.

### 86. Difference of generator and iterator

Generators are a simple and powerful tool for creating iterators. They are written like regular functions but use the yield statement whenever they want to return data. Each time next() is called on it, the generator resumes where it left off (it remembers all the data values and which statement was last executed). An example shows that generators can be trivially easy to create:

```
def reverse(data):
    for index in range(len(data)-1, -1, -1):
        yield data[index]

for char in reverse('golf'):
	print(char)
```

A Python iterator returns us an iterator object- one value at a time. Example:
```
iter_obj = iter([3,4,5])
next(iter_obj)
```

1. In creating a python generator, we use a function. But in creating an iterator in python, we use the iter() and next() functions.
2. A generator in python makes use of the ‘yield’ keyword. A python iterator doesn’t.
3. Python generator saves the states of the local variables every time ‘yield’ pauses the loop in python. An iterator does not make use of local variables, all it needs is iterable to iterate on.
4. A generator may have any number of ‘yield’ statements.
5. You can implement your own iterator using a python class; a generator does not need a class in python.
6. To write a python generator, you can either use a Python function or a comprehension. But for an iterator, you must use the iter() and next() functions.
7. Generator in python let us write fast and compact code. This is an advantage over Python iterators. They are also simpler to code than do custom iterator.
8. Python iterator is more memory-efficient.
9. A generator function returns a generator, an iterator returns an iterator object.
10. python Generator provides even more functionality as co-routines

a. A python generator is an iterator

b. Iterator in python is a subclass of Iterable.

https://data-flair.training/blogs/python-generator-vs-iterator/

### 87. What is the type of x?

```
x = (i for i in range(10))
```
Ans: x is a generator.

### 88. Use one line of code to group 1-N integers into groups of 3. Example:[1,2,3,4,5,6] ->[[1,2,3],[4,5,6]]

```
N = 99
print ([[x for x in range(1,N+1)] [i:i+3] for i in range(0,N,3)])
```

### 89. yield statement

The yield statement suspends function’s execution and sends a value back to the caller, but retains enough state to enable function to resume where it is left off. When resumed, the function continues execution immediately after the last yield run. This allows its code to produce a series of values over time, rather than computing them at once and sending them back like a list.

## Object Oriented

### 90. Dunder or magic methods in Python

Dunder or magic methods in Python are the methods having two prefix and suffix underscores in the method name. These are commonly used for operator overloading. Few examples for magic methods are: __init__, __add__, __len__, __str__, __repr__ etc.

https://rszalski.github.io/magicmethods/

### 91. Talk about your understanding of object oriented programming

Another quite broad topic:
1. Encapsulation
2. Composition, inheritance, and delegation
3. Polymorphism

https://en.wikipedia.org/wiki/Object-oriented_programming

## Regular Expression

### 92. use a regular expression to match IP

`^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$`

### 93. a = 'abbbccc', use re to change to 'abccc', no matter how many b.

`re.sub(r'b+','b','abbbccc')`

### 94. Python string search and replace

`re.match(pat,s)`: match from beginning of s, if not matched return None, if matched return matchobject.

`re.search(pat,s)`: search in anywhere of s, if not matched return None, if matched return matchobject.

`re.sub(pat,newpat,s)`: substitute all the pat in s with newpat.

### 95. What is the difference between <.> and <.*?> when matching HTML g tag?

`'\<.\>'` matches tags with only one letter, such as <u> <t>.

`'\<.*?\>'` matches a multiple letter tag. *? as a lazy quantifier prevents it from matching the whole webpage.

### 96. Regular expression greedy vs lazy quantifiers

- greedy: try to match longest with matching condiction.
- lazy: try to match shortest with matching condiction.

## System Programming

### 97. Process control

A Process is the instance of a pragram that is being excuted by one or many threads. A process needs corresponding system resources: memory, timeslices, and pid.

Example of Process control:
```
from multiprocessing import Process

def f(name):
    print('hello', name)

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start()
    p.join()
```
Note if you are using Spyder, this doesn't work because the std.out is not working in the called process. You need to run the code in `python -m idledic`.

 ### 98. Your opinion on multiprocessing, multithreading, coroutine

https://learn-gevent-socketio.readthedocs.io/en/latest/general_concepts.html

### 99. What about async IO?

https://realpython.com/async-io-python/#where-does-async-io-fit-in

### 100. Difference between parallelism and concurrency

Concurrency and parallelism are two related but distinct concepts.

Concurrency means, essentially, that task A and task B both need to happen independently of each other, and A starts running, and then B starts before A is finished.

There are various different ways of accomplishing concurrency. One of them is parallelism--having multiple CPUs working on the different tasks at the same time. But that's not the only way. Another is by task switching, which works like this: Task A works up to a certain point, then the CPU working on it stops and switches over to task B, works on it for a while, and then switches back to task A. If the time slices are small enough, it may appear to the user that both things are being run in parallel, even though they're actually being processed in serial by a multitasking CPU.
